import string
import requests
from requests.auth import HTTPBasicAuth
from time import time_ns,time
from pprint import pprint
import json
  
def login(username,password):
    users = {
        'admin':'e' * 1000
    }
    if username in users and users[username] == password:
        # print("Login successful!")
        return True
    else:
        # print("Invalid username or password.")
        return False

BASE_URL = "http://127.0.0.1:7860"

session = requests.Session()


supposed_username = 'admin'


attempt_string = 'a' + 'e' * 999

start = time_ns()
# login_response = login(supposed_username, attempt_string)
login_response = session.get(BASE_URL, auth=HTTPBasicAuth(supposed_username, attempt_string))
end = time_ns()
print(f"First letter almost password time : {end - start}\n")

attempt_string = 'e' * 999 + 'a'

start = time_ns()
# login_response = login(supposed_username, attempt_string)
login_response = session.get(BASE_URL, auth=HTTPBasicAuth(supposed_username, attempt_string))
end = time_ns()
print(f"Last letter almost password time : {end - start}\n")


attempt_string = 'e' * 448 + 'a' + 'e' * 450

start = time_ns()
# login_response = login(supposed_username, attempt_string)
login_response = session.get(BASE_URL, auth=HTTPBasicAuth(supposed_username, attempt_string))
end = time_ns()
print(f"Middle letter almost password time : {end - start}\n")


attempt_string = 'a' + 'b' + 'e' * 998
start = time_ns()
login_response = session.get(BASE_URL, auth=HTTPBasicAuth(supposed_username, attempt_string))
end = time_ns()
print(f"First and Second letters almost password time : {end - start}\n")

attempt_string = 'e' * 1000

start = time_ns()
# login_response = login(supposed_username, attempt_string)
login_response = session.get(BASE_URL, auth=HTTPBasicAuth(supposed_username, attempt_string))
end = time_ns()
print(f"REAL password time : {end - start}\n")